<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Topological Interpolation: Nonuniform Interpolation based on Image Topology for Super-Resolution Reconstruction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Topological Interpolation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Nonuniform Interpolation based on Image Topology for Super-Resolution Reconstruction </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This program implements the topology based interpolation technique for utilization in high resolution pixel estimation stage of super-resolution image reconstruction process as described in B. Dedes, "Inverse distance weighted interpolation based on image topology for super-resolution," MSc Thesis, Dept. of Electrical and Electronics Eng., Anadolu Univ., Eskisehir, 2021. In the work, Degree of connectedness map computation algorithms in the literature are revised to work on nonuniform data. Then, connectedness map properties in brightness and darkness topology are exploited in order to improve the results of inverse distance weighting interpolation along the edges in super-resolution imaging.</p>
<p>In the thesis, connectivity maps in each interpolation window are computed using an initial point inserted into triangulation. The value of this initial point is computed using linear triangular interpolation. However, Subdiv2D class of OpenCV does not have a point deletion method, hence, any initial points inserted are left in the triangulation. To avoid this, connectivity maps are computed using the nearest sample to the query point. It is observed that this modificaiton does not significantly alter the results.</p>
<p>This program does not cover the image registration stage of super-resolution reconstruction process. Hence, pre-computed registration parameters shall be provided by the user. Using known registration parameters, a super-resolution grid is produced by the <code><a class="el" href="computeGrid_8h.html#aafd4aad66a8bdf879c29a475e689458f" title="Computes coordinates of rotated and shifted low-resolution (LR) frame pixel locations on super-resolu...">computeCoord()</a></code> method. For N low-resolution frames, format of the translation matrix is:  </p><p class="formulaDsp">
\[ \left[ {\begin{array}{ccccc}
                                            0 &amp; \Delta x_1 &amp; \Delta x_2 &amp; \dots &amp; \Delta x_{N-1}\\
                                            0 &amp; \Delta y_1 &amp; \Delta y_2 &amp; \dots &amp; \Delta y_{N-1}\\
                                        \end{array} } \right] \]
</p>
<p> and the format of the rotation vector is:  </p><p class="formulaDsp">
\[ \left[ {\begin{array}{ccccc} 
                                            0 &amp; \theta_1 &amp; \theta_2 &amp; \dots &amp; \theta_{N-1} 
                                        \end{array} } \right] \]
</p>
<p> where each variable represents the shift and rotation angle with respect to the first LR frame. Unit of translational shifts is fraction of a 1 unit length (corresponding to a 1 pixel length) and unit of rotation is degrees. These parameters are suplied to the <code><a class="el" href="computeGrid_8h.html#aafd4aad66a8bdf879c29a475e689458f" title="Computes coordinates of rotated and shifted low-resolution (LR) frame pixel locations on super-resolu...">computeCoord()</a></code> method as in the example below. Then, using the <a class="el" href="classtopologicalReconstruction.html#a5577779b360ea23fd91df07fa2a028a4">reconstruct()</a> method of <code><a class="el" href="classtopologicalReconstruction.html" title="This class contains methods to compute degree of connectedness map for nonuniform data and performs s...">topologicalReconstruction</a></code> class, low resolution pixel values are interpolated, interpolated values close to an edge are pulled towards to either lower or upper bound computed using brighness and darkness topologies. Interpolation function is provided as a functor argument to the <a class="el" href="classtopologicalReconstruction.html#a5577779b360ea23fd91df07fa2a028a4">reconstruct()</a> method. In the following example, a set of 9 LR frames with known dislocation parameters are reconstructed using inverse distance weighting interpolation.</p>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="computeGrid_8h.html">computeGrid.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;topologicalReconstruction.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;interpolationMethods.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;opencv2/imgproc.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;opencv2/highgui.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>cv;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="classIDW.html">IDW</a> idw( 2.0 );</div>
<div class="line">    <a class="code hl_class" href="classtopologicalReconstruction.html">topologicalReconstruction</a> topologyBasedSuperRes;</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;Point2f&gt; pixels;</div>
<div class="line">    std::vector&lt;float&gt; pixelValues;</div>
<div class="line">    std::vector&lt;Point2f&gt; HiResGrid;</div>
<div class="line"> </div>
<div class="line">    vector&lt;Mat&gt; frames;</div>
<div class="line">    vector&lt;cv::String&gt; fn;</div>
<div class="line"> </div>
<div class="line">    glob( <span class="stringliteral">&quot;../../lowResolutionFrames/plate_3x_LR/*.tif&quot;</span>, fn, <span class="keyword">false</span> );</div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; fn.size(); i++ )</div>
<div class="line">        frames.push_back( imread(fn[i], CV_8UC1) );</div>
<div class="line"> </div>
<div class="line">    vector&lt;vector&lt;float&gt;&gt; delta = {</div>
<div class="line">            {+0.0000, -0.6667, -0.6667, +0.3333, +0.6667, -0.6667, +0.6667, +0.3333, +0.3333},</div>
<div class="line">            {+0.0000, +0.6667, +0.0000, +0.6667, +0.6667, +0.0000, -0.6667, +0.6667, +0.0000}</div>
<div class="line">    };</div>
<div class="line">    vector&lt;float&gt; theta = {+0.0000, -1.5796, -3.0695, -1.2258, +0.7295, -3.6170, +3.3553, -2.3098, +1.2052};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="computeGrid_8h.html#aafd4aad66a8bdf879c29a475e689458f">computeCoord</a>( frames, delta, theta, 3, pixels, pixelValues, HiResGrid );</div>
<div class="line">    Mat topological( boundingRect(HiResGrid).size(), CV_8UC1 );</div>
<div class="line">    topologyBasedSuperRes.<a class="code hl_function" href="classtopologicalReconstruction.html#a5577779b360ea23fd91df07fa2a028a4">reconstruct</a>( pixels, pixelValues, idw, HiResGrid, topological );</div>
<div class="line"> </div>
<div class="line">    imshow( <span class="stringliteral">&quot;Topological Interpolation&quot;</span>, topological );</div>
<div class="line">    waitKey(0);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassIDW_html"><div class="ttname"><a href="classIDW.html">IDW</a></div><div class="ttdoc">Inverse distance weighting interpolation function object.</div><div class="ttdef"><b>Definition:</b> interpolationMethods.h:18</div></div>
<div class="ttc" id="aclasstopologicalReconstruction_html"><div class="ttname"><a href="classtopologicalReconstruction.html">topologicalReconstruction</a></div><div class="ttdoc">This class contains methods to compute degree of connectedness map for nonuniform data and performs s...</div><div class="ttdef"><b>Definition:</b> topologicalReconstruction.h:114</div></div>
<div class="ttc" id="aclasstopologicalReconstruction_html_a5577779b360ea23fd91df07fa2a028a4"><div class="ttname"><a href="classtopologicalReconstruction.html#a5577779b360ea23fd91df07fa2a028a4">topologicalReconstruction::reconstruct</a></div><div class="ttdeci">void reconstruct(std::vector&lt; cv::Point2f &gt; &amp;points, std::vector&lt; float &gt; &amp;values, Func interp, std::vector&lt; cv::Point2f &gt; &amp;grid, cv::Mat &amp;dst)</div><div class="ttdoc">Reconstructs a single high-resolution (HR) image from several low-resolution (LR) frames.</div></div>
<div class="ttc" id="acomputeGrid_8h_html"><div class="ttname"><a href="computeGrid_8h.html">computeGrid.h</a></div></div>
<div class="ttc" id="acomputeGrid_8h_html_aafd4aad66a8bdf879c29a475e689458f"><div class="ttname"><a href="computeGrid_8h.html#aafd4aad66a8bdf879c29a475e689458f">computeCoord</a></div><div class="ttdeci">void computeCoord(const std::vector&lt; cv::Mat &gt; &amp;src, const std::vector&lt; std::vector&lt; float &gt; &gt; &amp;delta, const std::vector&lt; float &gt; &amp;theta, int scale, std::vector&lt; cv::Point2f &gt; &amp;points, std::vector&lt; float &gt; &amp;values, std::vector&lt; cv::Point2f &gt; &amp;mesh)</div><div class="ttdoc">Computes coordinates of rotated and shifted low-resolution (LR) frame pixel locations on super-resolu...</div></div>
</div><!-- fragment --><p>Since real super-resolution datasets are hard to come by, a MATLAB routine, <code>generateFrames.m</code>, for synthetic low-resolution image generation is provided to demonstrate the possibilities of the method. Implementation of biharmonic spline interpolation, another global interpolation method, is also available in <a class="el" href="classbiharmonic.html">biharmonic</a> class to experiment with topology based technique. In addition, linear triangular interpolation is provided in <code><a class="el" href="classtriangularReconstruction.html" title="This class contaions methods to perform super resolution reconstruction using linear triangular inter...">triangularReconstruction</a></code> class for reference. All algorithms are implemented for grayscale images but can be extended to color by computing connectedness information using grayscale intensity values and then interpolating each color channel.</p>
<p>The major disadvantage of the technique is its slow execution time due to high computational requirements of degree of connectedness map calculations. However, it can be executed in paralled in order to speed up the process since connectedness computation at each sample in the interpolation window do not require the results from the others. One of the eaiser ways of adding parallelism to the code is to use a performance library such as Intel's oneAPI Threading Building Blocks (TBB). When <code>USE_TBB</code> macro is defined, instead of the regular for loop, oneTBB's parallel for loop is utilized in connectedness computations and a performance improvement is achieved depending on the number of processor cores available.</p>
<p>The program is tested on a Linux machine with gcc 11, opencv version 4.5 and libtbb version 2020.1-2. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
